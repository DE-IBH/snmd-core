define(["snmd-core/GUI","snmd-core/MQTT","sprintf","jquery","js-logger","JSON.minify"],function(t,n,i,e,o,s){"use strict";var r=null,a=function(){if(null!==r)throw new Error("Cannot instantiate more than one instance, use getInstance()!");this.version="0.2",this.si_prefs=["T","G","M","k",""],this.si_facts=[Math.pow(10,12),Math.pow(10,9),Math.pow(10,6),Math.pow(10,3),1],this.genid=0};return a.getInstance=function(){return null===r&&(r=new a),r},a.prototype.srVersion=function(){return this.version},a.prototype.srURLParam=function(t,n){var i=new RegExp("[?&]"+t+"=([^&#/]*)([&#/]|$)").exec(window.location.href);return i&&i[1]?decodeURIComponent(i[1]):n},a.prototype.srConfigLoaded=function(i){this.config=i,o.debug("[Core] Loading view list: "+this.config.default_view),e.ajax({global:!1,url:this.config.default_view+"?nonce="+Math.random(),dataType:"json",dataFilter:function(t,n){return s.minify(t)},success:function(i){t.srInit(i),"undefined"==typeof this.config.mqttws_host&&(this.config.mqttws_host=window.location.hostname),"undefined"==typeof this.config.mqttws_port&&(this.config.mqttws_port=9001),n.srInit(this.config.mqttws_host,this.config.mqttws_port)}.bind(this),error:function(t,n,i){o.error("[Core] Failed to load view list: "+n+" - "+i)}.bind(this)})},a.prototype.srInitLoad=function(t,n){o.debug("[Core] Loading view config: "+t),e.ajax({global:!1,url:t+"?nonce="+Math.random(),dataType:"json",dataFilter:function(t,n){return s.minify(t)},success:this.srConfigLoaded.bind(this),error:n})},a.prototype.snmdInit=function(t){if(o.info("[Core] snmd v"+this.version+" - Scotty Network Management Dashboard"),"object"==typeof t.snmd_widgets){var n,i=function(t){o.info("[Core]  "+this.prefix+" => "+this.package+" v"+t.getVersion()),t.init(this.pref,this.package)};for(n in t.snmd_widgets){var s=t.snmd_widgets[n],r={paths:{}};r.paths[s.package]=s.package+"/js",require.config(r),require([s.package+"/Boot"],i.bind(s))}}var a=this.srURLParam("config","default");"default"!==a?e("#snmd-title").text(a):e("#snmd-title").text(window.location.host),this.srInitLoad("configs/"+a+".json",function(){this.srInitLoad("configs/default.json",function(t,n,i){o.error("[Core] Failed to load configuration: "+n+" - "+i)})}.bind(this))},a.prototype.srSiFormatNum=function(t,n,e,o){if("undefined"==typeof t)return e;if(isNaN(t))return e;var s=0;t<0&&(t*=-1,s=1);var r,a=4;for(r=0;r<this.si_facts.length;r++)if(t>=.99*this.si_facts[r]){a=r;break}return t/=this.si_facts[a],("undefined"==typeof o||isNaN(o))&&(o=t<20?1:0),s&&(t*=-1),i.sprintf("%."+o+"f%s%s",t,this.si_prefs[a],n)},a.prototype.srNagStateColor=function(t){return"undefined"==typeof t?"Grey":0===t?"LimeGreen":1===t?"Gold":2===t?"Crimson":"Orange"},a.prototype.srGenID=function(t){return this.genid+=1,"snmd-genid-"+t+"-"+this.genid},a.getInstance()});
//# sourceMappingURL=dist/Core.map