define(["snmd-core/GUI","snmd-core/MQTT","sprintf","jquery","js-logger"],function(t,n,o,i,e){"use strict";var s=null,r=function(){if(null!==s)throw new Error("Cannot instantiate more than one instance, use getInstance()!");this.version="0.2",this.si_prefs=["T","G","M","k",""],this.si_facts=[Math.pow(10,12),Math.pow(10,9),Math.pow(10,6),Math.pow(10,3),1],this.genid=0};return r.getInstance=function(){return null===s&&(s=new r),s},r.prototype.srVersion=function(){return this.version},r.prototype.srURLParam=function(t,n){var o=new RegExp("[?&]"+t+"=([^&#/]*)([&#/]|$)").exec(window.location.href);return o&&o[1]?decodeURIComponent(o[1]):n},r.prototype.srConfigLoaded=function(o){this.config=o,e.debug("[Core] Loading view list: "+this.config.default_view),i.ajax({global:!1,url:this.config.default_view+"?nonce="+Math.random(),dataType:"json",success:function(o){t.srInit(o),"undefined"==typeof this.config.mqttws_host&&(this.config.mqttws_host=window.location.hostname),"undefined"==typeof this.config.mqttws_port&&(this.config.mqttws_port=9001),n.srInit(this.config.mqttws_host,this.config.mqttws_port)}.bind(this),error:function(t,n,o){e.error("[Core] Failed to load view list: "+n+" - "+o)}.bind(this)})},r.prototype.srInitLoad=function(t,n){e.debug("[Core] Loading view config: "+t),i.ajax({global:!1,url:t+"?nonce="+Math.random(),dataType:"json",success:this.srConfigLoaded.bind(this),error:n})},r.prototype.srInit=function(){e.info("[Core] SNMD v"+this.version+" - Scotty Network Management Dashboard");var t=this.srURLParam("config","default");"default"!==t?i("#snmd-title").text(t):i("#snmd-title").text(window.location.host),this.srInitLoad("configs/"+t+".json",function(){this.srInitLoad("configs/default.json",function(t,n,o){e.error("[Core] Failed to load configuration: "+n+" - "+o)})}.bind(this))},r.prototype.srSiFormatNum=function(t,n,i,e){if("undefined"==typeof t)return i;if(isNaN(t))return i;var s=0;t<0&&(t*=-1,s=1);var r,a=4;for(r=0;r<this.si_facts.length;r++)if(t>=.99*this.si_facts[r]){a=r;break}return t/=this.si_facts[a],("undefined"==typeof e||isNaN(e))&&(e=t<20?1:0),s&&(t*=-1),o.sprintf("%."+e+"f%s%s",t,this.si_prefs[a],n)},r.prototype.srNagStateColor=function(t){return"undefined"==typeof t?"Grey":0===t?"LimeGreen":1===t?"Gold":2===t?"Crimson":"Orange"},r.prototype.srGenID=function(t){return this.genid+=1,"snmd-genid-"+t+"-"+this.genid},r.getInstance()});
//# sourceMappingURL=dist/Core.map