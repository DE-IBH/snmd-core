define(["snmd-core/js/States","push","jquery","js-logger"],function(t,i,n,o){"use strict";var e=null,s=function(){if(null!==e)throw new Error("Cannot instantiate more than one instance, use getInstance()!");this.disabled=!1,this.notifications={}};return s.getInstance=function(){return null===e&&(e=new s),e},s.prototype.checkPerm=function(t,n){i.Permission.request(t,n)},s.prototype.notify=function(n,e,s,a,c){if(void 0===this.notifications[n]&&(this.notifications[n]={}),void 0===this.notifications[n][e]&&(this.notifications[n][e]=void 0),this.notifications[n][e]!==s&&(this.notifications[n][e]=s,!this.disabled))try{var r=t.stateName(s);i.create(a+": "+r,{body:c,icon:"img/notify/"+r+".png",tag:n+"_"+e,timeout:1e4,onClick:function(){window.focus(),this.close()}})}catch(t){o.error("[Notify] Exception for "+n+"#"+e+": "+t.message)}},s.prototype.enable=function(){this.disabled=!1,o.info("[Notify] Browser notifications enabled.")},s.prototype.disable=function(){this.disabled=!0,o.info("[Notify] Browser notifications disabled.")},s.getInstance()});