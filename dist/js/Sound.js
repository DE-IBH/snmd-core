define(["snmd-core/js/Core","howler","jquery","js-logger"],function(n,t,s,o){"use strict";var e=null,d=function(){if(null!==e)throw new Error("Cannot instantiate more than one instance, use getInstance()!");this.snmdSoundSets={},this.snmdMuted=!1};return d.getInstance=function(){return null===e&&(e=new d),e},d.prototype.snmdLoadSetJSON=function(n,e){if(void 0!==e.sounds){this.snmdSoundSets[n]={};var d=this;s.each(e.sounds,function(s,e){o.info("[Sound]  %s => %s",s,e.toString()),d.snmdSoundSets[n][s]=new t.Howl({src:e})})}},d.prototype.snmdLoadSet=function(n){void 0===this.snmdSoundSets[n]&&(o.info('[Sound] Loading sound set "%s"',n),s.ajax({global:!1,url:"snd/"+n+"/set.json",dataType:"json",dataFilter:function(n,t){return JSON.minify(n)},success:function(t){this.snmdLoadSetJSON(n,t)}.bind(this),error:function(n,t,s){o.error("[Sound] Failed to load set config: %s - %s",t,s)}}))},d.prototype.snmdPlay=function(n,t){this.snmdMuted||(void 0!==this.snmdSoundSets[n]?void 0!==this.snmdSoundSets[n][t]?this.snmdSoundSets[n][t].play():o.warn("[Sound] Unable to play %s/%s: sound is not part of the set.",n,t):o.warn("[Sound] Unable to play %s/%s: unknown sound set.",n,t))},d.prototype.snmdMute=function(){this.snmdMuted=!0},d.prototype.snmdUnmute=function(){this.snmdMuted=!1},d.getInstance()});